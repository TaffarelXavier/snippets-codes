function selectOptionByValue(e,t){for(var a=e.options,o=0,n=a.length;o<n;o++)if(a[o].value==t)return e.selectedIndex=o,!0;return!1}function funcoesNota(){$(".editar-nota").click(function(){var{note_id:e,note_title:t,note_description:a,note_tags:o,note_type_language:n,category_id:i,type_language:r}=JSON.parse($(this).attr("data-nota")),s=document.getElementById("gd-gategory"),c=document.getElementById("gd-language"),l=document.getElementById("gd-select-tags"),d=document.getElementById(`tags_${e}`).value;try{d=JSON.parse(d).length>0?JSON.parse(d):""}catch(e){console.error("Erro Tx1: ",e)}d.length>0&&($(l).html(""),d.map(({tag_id:e,tag_name:t})=>{$(l).append(`<option value='${e}' selected="selected">${t}</option>`)})),selectOptionByValue(s,i),selectOptionByValue(c,r),$("#modalEditarNota").modal("show"),$("#gd-title").val(t),$("#gd-description").val(a),$("#gd-tags").val(o);var m=ace.edit(document.getElementById(`note_${e}`));$("#gd-get-note").html(escapeHtml(m.getValue())).addClass(n),$("#nota-id").val(e),$("pre code").each(function(e,t){hljs.highlightBlock(t)})}),$(".copiar").each(function(e,t){$(this).click(function(e){let t=$(this).attr("data-id");var a=ace.edit(document.getElementById(`note_${t}`)),o=ace.require("ace/ext/beautify");o.beautify(a.session),a.selectAll(),a.focus(),document.execCommand("copy");var n={content:"Código copiado com sucesso!",style:"toast",timeout:2e3};$.snackbar(n)})}),$(".editor").each(function(e,t){var a=$(this);let{lang_name:o}=JSON.parse(a.attr("data-note"));var n=ace.edit(t,{mode:"ace/mode/"+o,maxLines:800,wrap:!0,autoScrollEditorIntoView:!0,minLines:1});t.style.fontSize="16px",n.setTheme("ace/theme/dracula"),n.session.setTabSize(4),n.resize(),n.setOptions({autoScrollEditorIntoView:!0,copyWithEmptySelection:!0})}),$(".excluir-nota").click(function(){let e=parseInt($(this).attr("data-nota-id")),t={type:"question",buttons:["Não","Sim"],title:"Deseja realmente excluir esta nota?",message:"Esta operação não poderá ser revertida.",detail:"Algum detalhe aqui",defaultId:0,cancelId:-1};remote.dialog.showMessageBox(win,t,t=>{1==t&&($(`#note_card_${e}`).remove(),carregarCategorias())})}),$(".tag").click(function(e){let t=e.target.innerText;$("#input-pesquisar-tag").val(t),pesquisarPorTag(t)}),$(".open-code").click(function(){var{note_id:e,note_title:t,note_description:a}=JSON.parse($(this).attr("data-nota")),o=window.open("","_blank");o.document.write('<html><head><title>Print it!</title><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/dracula.min.css"></head><body>'),o.document.write($("#note_"+e).html()),o.document.write("</body></html>")})}function pesquisarPorTag(e){if(e.length>0){var t=$(".tag");$(".notas").removeClass("d-flex").attr("hidden",!0).hide();for(var a=0;a<t.size();a++)if(t[a].innerText.toUpperCase()==e.toUpperCase()){var o=t[a].getAttribute("data-note-id");$("#note_card_"+o).removeAttr("hidden").show()}}else $(".notas").removeAttr("hidden").show()}function getNotesByCategoryId(e,t,a){var o={method:"GET",mode:"cors",cache:"default"};t=t||1,fetch(config[INDEX].baseApiRestUrl+"/notes-por-category-id/"+e+"/"+t,o).then(function(e){200===e.status?e.json().then(function(e){a(e)}):console.warn("Looks like there was a problem. Status Code: "+e.status)})}function loadTodosSnippets(){fetch(config[INDEX].baseApiRestUrl+"/notes",{method:"GET"}).then(e=>{200!==e.status||e.json().then(e=>{let t="";e.map(e=>{t+=notas(e,[])}),$("#get-notes").html(t),funcoesNota(),$("#get-notes").text().toString().length>0&&$("#esqueleto").attr("hidden",!0)})})}function cabecalho(e,t,a){$("#painel-termo-filtrado").removeAttr("hidden"),$("#termo-filtrado").html(`TERMO FILTRADO: <div \n    style="background:url('${config[INDEX].baseApiRestUrl}/images/${a}') no-repeat;background-size: 95% 95%;\n    background-attachment: scroll;background-position: 0px 3px;border:0px solid red;"\n     class="termo-filtrado-icone"></div><strong>`+t.trim().toUpperCase()+"</strong>");var o=$("#termo-filtrado").offset();$("html, body").delay(1e3).animate({scrollTop:o.top-70},200),$("#esqueleto").removeAttr("hidden"),$(".list-group-item").removeClass("list-group-item-action list-group-item-success"),$(e).addClass("list-group-item-action list-group-item-success","disabled")}function carregarNotasPorCategoria(e,{category_id:t,category_name:a,category_icon:o}){if("xs"==mediaQuery()){const e=mdc.drawer.MDCDrawer.attachTo(document.querySelector(".mdc-drawer")),t=mdc.topAppBar.MDCTopAppBar.attachTo(document.querySelector(".mdc-top-app-bar"));e.open=!e.open,t.listen("MDCTopAppBar:nav",()=>{e.open=!e.open})}return cabecalho(e,a,o),getNotesByCategoryId(t,1,function(e){$("#get-notes").html("");let t="";e.map(e=>{t+=notas(e,[])}),$("#get-notes").html(t),funcoesNota(),e.length>0&&$("#esqueleto").attr("hidden",!0)}),!1}function carregarCategorias(){var e={method:"GET",mode:"cors",cache:"default"};fetch(config[INDEX].baseApiRestUrl+"/categories",e).then(function(e){200===e.status?e.json().then(function(e){var t=document.getElementById("category");t.innerHTML="",e.sort((e,t)=>e.category_order-t.category_order),e.map(e=>{let{category_name:a,category_id:o,category_icon:n,category_placeholder_icon:i}=e;var r=document.createElement("li");r.id=a,r.onclick=function(){var t=this;window.location.hash=a.toLowerCase(),carregarNotasPorCategoria(t,e)};const s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAAAAACpleexAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfjDBMUJR7SizDUAAAAJElEQVQ4y2M4QyRgGFU4qnBkKbxw8eLNixcHtxtHFY4qHAoKAWtc+2KAiEgvAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIwVDA1OjM3OjMwKzA5OjAwhGs2fQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMFQwNTozNzozMCswOTowMPU2jsEAAAAASUVORK5CYII=";$(r).addClass("list-group-item justify-content-between").css({borderBottom:"1px dashed #ccc",padding:"0px !important"}).html(`<span class="categoria-nome">\n              <img style="margin:0;position: relative;top:-1px; width:40px;height: 40px;background:#eee;"\n               src="${config[INDEX].baseApiRestUrl}/images/${i.trim()}" alt="${n.trim()}" data-src='${null!=n?`${config[INDEX].baseApiRestUrl}/images/`+n.trim():s}' class="lazy" /> <!---->\n              ${a.toUpperCase()}</span>\n   <span class='badge badge-primary badge-pill' style="float:right;position:relative;top:-10px;margin:0">${e.total}</span>`).attr("data-category",JSON.stringify(e)).attr("title",a.toUpperCase()),t.appendChild(r),setTimeout(function(){var e=[].slice.call(document.querySelectorAll("img.lazy"));if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){let t=new IntersectionObserver(function(e,a){e.forEach(function(e){if(e.isIntersecting){let a=e.target;a.src=a.dataset.src,a.classList.remove("lazy"),$(a).css({background:"transparent"}),t.unobserve(a)}})});e.forEach(function(e){t.observe(e)})}},100)})}):console.warn("Looks like there was a problem. Status Code: "+e.status)}).catch(function(e){console.error("Fetch Error :-S",e)})}function mergeArrayWithDiff(e,t){var a=[...e,...t].reduce((e,t)=>{let a=e.find(e=>e.category_name===t.category_name);return a?a.count+=t.count:e.push(Object.assign({},t)),e},[]);return a}function carregarTodasCategoria(){setTimeout(()=>{var e=document.getElementById("gd-get-categories"),t=Category.getCategorieWithCountNotes(),a=Category.all();a=a.map(e=>(e.count=0,e));var o=mergeArrayWithDiff(t,a);o.map(t=>{var a=document.createElement("li");$(a).addClass("mdc-list-item mdc-ripple-upgraded").css({borderBottom:"1px dashed #ccc",padding:"0px !important"}).html(`<span class="mdc-list-item__text">${t.category_name.toUpperCase()}[${t.count}]</span>\n          <!--<span class="mdc-list-item__meta material-icons" aria-hidden="true" data-category-id='${t.category_id}'>delete</span>-->\n          <span class="mdc-list-item__meta material-icons remove-category"\n           aria-hidden="true" data-category='${JSON.stringify(t)}'>delete</span>\n        `).attr("id","category__"+t.category_id).attr("data-category",JSON.stringify(t)).attr("title",t.category_name.toUpperCase()),e.appendChild(a)})},1e3)}var mediaQuery=()=>window.matchMedia("(max-width: 575.98px)").matches?"xs":window.matchMedia("(min-width: 576px) and (max-width: 767.98px)").matches?"sm":window.matchMedia("(min-width: 768px) and (max-width: 991.98px)").matches?"md":window.matchMedia("(min-width: 992px) and (max-width: 1199.98px)").matches?"lg":window.matchMedia("(min-width: 1200px)").matches?"xl":void 0;document.addEventListener("DOMContentLoaded",function(e){var t=window.location.hash.replace("#","");if(t.length>0){var a={method:"GET",mode:"cors",cache:"default"};fetch(config[INDEX].baseApiRestUrl+"/get-all-categories?category_name="+t.toUpperCase(),a).then(function(e){200===e.status?e.json().then(function(e){let t=e[0];carregarNotasPorCategoria(null,t);let a="";t.notes.map(e=>{a+=notas(e,[])}),$("#get-notes").html(a),funcoesNota(),cabecalho("#_"+t.category_name.toLowerCase(),t.category_name,t.category_icon),t.notes.length>0&&($("#esqueleto").attr("hidden",!0),setTimeout(function(){$(".list-group-item").removeClass("list-group-item-action list-group-item-success"),$("#"+t.category_name.toUpperCase()).addClass("list-group-item-action list-group-item-success","disabled")},2e3))}):console.warn("Looks like there was a problem. Status Code: "+e.status)})}else loadTodosSnippets()}),$(document).ready(function(){var e,t;$("#abrir-modal-criador-categoria").click(function(){setTimeout(function(){$("#category-name").focus().select()},500)}),$("#categoria").keyup(function(){let e=$(this);var t=removeSinaisDiacriticos(e.val().toLowerCase());let a=document.getElementById("category").childNodes;for(let e=0;e<a.length;e++){var o=removeSinaisDiacriticos(a[e].title.toLowerCase());o.includes(t)?$(a[e]).removeAttr("hidden").show():$(a[e]).removeClass("d-flex").attr("hidden",!0).hide()}$(".categoria-nome").unmark({done:function(){$(".categoria-nome").mark(t)}})}),$("#input-pesquisar-tag").on("input",e=>{var t=e.target.value;pesquisarPorTag(t)}),$("#input-pesquisar-geral").on("input",function(){var e=$(this),t=removeSinaisDiacriticos(e.val().toLowerCase()),a=document.getElementsByClassName("notas");if($(".note-title").each((e,o)=>{var n=removeSinaisDiacriticos(o.innerText.toLowerCase()),i=removeSinaisDiacriticos(a[e].innerText.toLowerCase()),r=parseInt($(o).attr("data-note-id"));n.includes(t)||i.includes(t)?$("#note_card_"+r).removeAttr("hidden").show():$("#note_card_"+r).removeClass("d-flex").attr("hidden",!0).hide()}),t.length>0){var o=t;$(".note-title, .text-secondary").unmark({done:function(){$(".note-title, .text-secondary").mark(o)}})}else $(".note-title, .text-secondary").unmark()}).keyup(function(e){if(13==e.keyCode){var t=$(this),a=t.val(),o={method:"GET",mode:"cors",cache:"default"};fetch(config[INDEX].baseApiRestUrl+"/notes/"+a+"?page=1",o).then(function(e){200===e.status?e.json().then(function(e){if(e.length>0){let t="";$("#get-notes").html(""),e.map(e=>{t+=notas(e,[])}),$("#get-notes").append(t),funcoesNota()}}):console.warn("Looks like there was a problem. Status Code: "+e.status)})}}),$("body").append(modalCategory("Criar nova categoria","exampleModal","idButton1"),modalCriarNota("Criar novo Snippet","modalCriarNota","buttonCriarNota"),modalEditarNota("Editar Snippet","modalEditarNota","btnAlterarNota")),e=document.getElementsByTagName("body")[0],t=document.createElement("script"),t.src="https://unpkg.com/showdown/dist/showdown.min.js",e.appendChild(t),$("#description").keyup(function(e){var t=$(this).val(),a=new showdown.Converter;let o=a.makeHtml(t);$("#visualizacao-markdown").html(o)}),funcSelect2("#select-tags"),funcSelect2("#gd-select-tags");var a=$("#categories_id"),o=$("#languages");a.select2({theme:"classic",width:"resolve",placeholder:"Seleleciona uma categoria"}).on("select2:select",function(e){var t=e.params.data;let a=o.find("option:contains('"+t.text+"')").val();o.val(a).trigger("change.select2")}),o.select2({theme:"classic",width:"resolve",placeholder:"Seleleciona uma opção de saída de formatação"}),$("#modalCriarNota").on("show.bs.modal",function(e){setTimeout(()=>{$("#note-title").focus().select()},500)}),$("#form-editar-nota").submit(function(e){e.preventDefault();let t=document.getElementById("nota-id").value,a=this.elements["gd-title"].value,o=this.elements["gd-description"].value,n=(document.getElementById("gd-select-tags"),document.getElementById("gd-get-note")),i=document.getElementById("gd-gategory"),r=document.getElementById("gd-language");n.innerText,i[i.selectedIndex].value,r[r.selectedIndex].value;return alert("Nota editaca com sucesso!"),!1}),$("#formSave").submit(function(e){e.preventDefault();let t=this,a=$("#visualizacao-markdown").html();$("#select-tags").select2("data").map(function(e){});var o=new FormData,n=document.getElementById("formSave");return o.append("title",n.title.value),o.append("description",a),o.append("code",n.code.value),o.append("category",n.category.value),o.append("formatacao-language",n["formatacao-language"].value),fetch(config[INDEX].baseApiRestUrl+"/notes",{method:"POST",body:o}).then(e=>{console.log(e)}),t.reset(),alert("Nota criada com sucesso!"),carregarCategorias(),!1}),carregarCategorias();var n=!0;$("#collapse-snippets").click(function(){n?($(this).html("visibility").attr("title","Expandir tudo..."),n=!1):($(this).html("visibility_off").attr("title","Desdobrar tudo..."),n=!0),$("details").attr("open",n)})});